@extends('layouts.dashboard.main')

@section('content')
    <div class="col-xl-9 col-lg-8 col-md-7 col-12 mb-4">
        <div class="row pt-4 g-3 px-md-0 px-3 mb-5">
            <div class="col-xxl-4 col-xl-5 col-lg-6">
                <div id="tree" class="br-green-light-2 br-15 p-3">
                    <ul class="ui-fancytree fancytree-container fancytree-plain" tabindex="0">
                        <li class="">
		    							<span
                                            class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    								<span class="fancytree-title">2018</span>
		    							</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    									<span
                                                    class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    										<span class="fancytree-expander"></span>
		    										<span class="fancytree-title">Экономический факультет</span>
		    									</span>
                                    <ul style="display: block;">
                                        <li class="fancytree-lastsib">
		    											<span
                                                            class="fancytree-node fancytree-active fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    												<span class="fancytree-expander"></span>
		    												<span class="fancytree-title">Кафедра экономической теории и национальной экономики</span>
		    											</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="">
		    							<span
                                            class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    								<span class="fancytree-title">2019</span>
		    							</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    									<span
                                                    class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    										<span class="fancytree-expander"></span>
		    										<span class="fancytree-title">Юридический факультет</span>
		    									</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    											<span
                                                            class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c"><span
                                                                class="fancytree-expander"></span>
		    											<span class="fancytree-title">Кафедра политических наук</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="">
		    						<span
                                        class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">	<span
                                            class="fancytree-title">2020</span>
		    						</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет финансов и учета</span>
		    								</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span
                                                            class="fancytree-title">Кафедра налогов и налогообложения</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="">
		    						<span
                                        class="fancytree-node fancytree-expanded fancytree-folder fancytree-exp-n fancytree-ico-ef">
		    							<span class="fancytree-title">2018</span>
		    						</span>
                        </li>
                        <li class="">
		    						<span
                                        class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    							<span class="fancytree-title">2032</span>
		    						</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет финансов и учета</span>
		    								</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span
                                                            class="fancytree-title">Кафедра налогов и налогообложения</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="">
		    						<span
                                        class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    							<span class="fancytree-title">2029</span>
		    						</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет экономики и управления</span>
		    								</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span class="fancytree-title">кафедра экономики</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="">
		    						<span
                                        class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    							<span class="fancytree-title">2021</span>
		    						</span>
                            <ul>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет финансов и учета</span>
		    								</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span
                                                            class="fancytree-title">Кафедра налогов и налогообложения</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-exp-e fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет менеджмента</span>
		    								</span>
                                    <ul style="">
                                        <li class="">
		    										<span class="fancytree-node fancytree-exp-n fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span class="fancytree-title">менеджмента</span>
		    										</span>
                                        </li>
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span
                                                            class="fancytree-title">Реклама и связи с общественностью</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                                <li class="fancytree-lastsib">
		    								<span
                                                class="fancytree-node fancytree-expanded fancytree-folder fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-ef">
		    									<span class="fancytree-expander"></span>
		    									<span class="fancytree-title">Факультет энергетики</span>
		    								</span>
                                    <ul style="">
                                        <li class="fancytree-lastsib">
		    										<span
                                                        class="fancytree-node fancytree-lastsib fancytree-exp-nl fancytree-ico-c">
		    											<span class="fancytree-expander"></span>
		    											<span
                                                            class="fancytree-title">Кафедра физики твердого тела</span>
		    										</span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <button class="btn btn-secondary br-none br-100 text-grey fs-14 w-100 mt-3 py-1 mt-3"
                        onclick="delBadge()">за все время
                </button>
            </div>
            <div class="col">
                <div class="out-kod mb-3"></div>
                <div class="row g-4">
                    <div class="col-xl-6">
                        <div class="br-green-light-2 p-3 br-20">
                            <img src="/images/Users_Group-l.svg">
                            <p class="text-grey fs-14">Пользователей <span class="ps-4 fs-32 fw-700">5</span></p>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Сотрудников:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Администраторов:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Обучающихся:</p>
                                <p class="text-grey fs-14 mb-2">2</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-0">Преподавателей:</p>
                                <p class="text-grey fs-14 mb-0">1</p>
                            </div>
                        </div>
                        <div class="br-green-light-2 p-3 br-20 mt-4">
                            <img src="/images/User_Card_ID-l.svg">
                            <p class="text-grey fs-14">Портфолий <span class="ps-4 fs-32 fw-700">5</span></p>
                            <div class="d-flex justify-content-between brt-green-light-2">
                                <p class="text-grey fs-14 mb-3 mt-1">Обучающимися</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Записи достижений:</p>
                                <p class="text-grey fs-14 mb-2">2</p>
                            </div>
                            <div class="d-flex justify-content-between brb-green-light-2">
                                <p class="text-grey fs-14 mb-2">Прикреплено ресурсов:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                            <div class="d-flex justify-content-between brt-green-light-2 mt-4">
                                <p class="text-grey fs-14 mb-3 mt-1">Преподавателями</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Записи достижений:</p>
                                <p class="text-grey fs-14 mb-2">2</p>
                            </div>
                            <div class="d-flex justify-content-between brb-green-light-2">
                                <p class="text-grey fs-14 mb-2">Прикреплено ресурсов:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="br-green-light-2 p-3 br-20">
                            <img src="/images/File_Document.svg">
                            <p class="text-grey fs-14">Загруженных работ <span class="ps-4 fs-32 fw-700">10</span></p>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Сотрудниками:</p>
                                <p class="text-grey fs-14 mb-2">2</p>
                            </div>
                            <div class="d-flex justify-content-between brb-green-light-2">
                                <p class="text-grey fs-14 mb-4">Преподавателями:</p>
                                <p class="text-grey fs-14 mb-4">1</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-3 mt-1">Обучающимися</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Одобрено:</p>
                                <p class="text-grey fs-14 mb-2">2</p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="text-grey fs-14 mb-2">Отправлено на доработку:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                            <div class="d-flex justify-content-between brb-green-light-2">
                                <p class="text-grey fs-14 mb-2">Ожидают одобрения:</p>
                                <p class="text-grey fs-14 mb-2">1</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @endsection

        @section('scripts')
            <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
            <script type="text/javascript" src="/js/moment.min.js"></script>
            <script type="text/javascript"
                    src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
            <script>
                $(document).ready(function () {
                    $('.js-example-basic-single').select2();
                });
                $('.btn-info-box').click(function () {
                    $("#info_box").fadeToggle(100);
                });
            </script>
            <script>

                $(document).ready(function () {
                    getReport(0);
                });
                $(function () {
                    $("#tree").fancytree({
                        checkbox: false,
                        cache: false,
                        source: [{
                            "title": "2018",
                            "folder": true,
                            "select": false,
                            "key": "y_1092",
                            "children": [{
                                "title": "\u042d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",
                                "folder": true,
                                "select": false,
                                "key": "f_3202",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0442\u0435\u043e\u0440\u0438\u0438 \u0438 \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438",
                                    "select": false,
                                    "key": "d_8720"
                                }]
                            }]
                        }, {
                            "title": "2019",
                            "folder": true,
                            "select": false,
                            "key": "y_1093",
                            "children": [{
                                "title": "\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",
                                "folder": true,
                                "select": false,
                                "key": "f_3203",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u043f\u043e\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043d\u0430\u0443\u043a",
                                    "select": false,
                                    "key": "d_8721"
                                }]
                            }]
                        }, {
                            "title": "2020",
                            "folder": true,
                            "select": false,
                            "key": "y_1154",
                            "children": [{
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432 \u0438 \u0443\u0447\u0435\u0442\u0430",
                                "folder": true,
                                "select": false,
                                "key": "f_3405",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u043d\u0430\u043b\u043e\u0433\u043e\u0432 \u0438 \u043d\u0430\u043b\u043e\u0433\u043e\u043e\u0431\u043b\u043e\u0436\u0435\u043d\u0438\u044f",
                                    "select": false,
                                    "key": "d_9332"
                                }]
                            }]
                        }, {
                            "title": "2018",
                            "folder": true,
                            "select": false,
                            "key": "y_1204",
                            "children": null
                        }, {
                            "title": "2032",
                            "folder": true,
                            "select": false,
                            "key": "y_1295",
                            "children": [{
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432 \u0438 \u0443\u0447\u0435\u0442\u0430",
                                "folder": true,
                                "select": false,
                                "key": "f_3937",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u043d\u0430\u043b\u043e\u0433\u043e\u0432 \u0438 \u043d\u0430\u043b\u043e\u0433\u043e\u043e\u0431\u043b\u043e\u0436\u0435\u043d\u0438\u044f",
                                    "select": false,
                                    "key": "d_11426"
                                }]
                            }]
                        }, {
                            "title": "2029",
                            "folder": true,
                            "select": false,
                            "key": "y_1344",
                            "children": [{
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",
                                "folder": true,
                                "select": false,
                                "key": "f_4045",
                                "children": [{
                                    "title": "\u043a\u0430\u0444\u0435\u0434\u0440\u0430 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438",
                                    "select": false,
                                    "key": "d_11792"
                                }]
                            }]
                        }, {
                            "title": "2022",
                            "folder": true,
                            "select": false,
                            "key": "y_1386",
                            "children": [{
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",
                                "folder": true,
                                "select": false,
                                "key": "f_4125",
                                "children": [{
                                    "title": "\u042d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0430 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435",
                                    "select": false,
                                    "key": "d_11961"
                                }]
                            }]
                        }, {
                            "title": "2019",
                            "folder": true,
                            "select": false,
                            "key": "y_1425",
                            "children": null
                        }, {
                            "title": "2019",
                            "folder": true,
                            "select": false,
                            "key": "y_1426",
                            "children": [{
                                "title": "\u0421\u043e\u0446\u0438\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",
                                "folder": true,
                                "select": false,
                                "key": "f_4752",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u0441\u043e\u0446\u0438\u043e\u043b\u043e\u0433\u0438\u0438",
                                    "select": false,
                                    "key": "d_14571"
                                }]
                            }]
                        }, {
                            "title": "2021",
                            "folder": true,
                            "select": false,
                            "key": "y_1646",
                            "children": [{
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432 \u0438 \u0443\u0447\u0435\u0442\u0430",
                                "folder": true,
                                "select": false,
                                "key": "f_4921",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u043d\u0430\u043b\u043e\u0433\u043e\u0432 \u0438 \u043d\u0430\u043b\u043e\u0433\u043e\u043e\u0431\u043b\u043e\u0436\u0435\u043d\u0438\u044f",
                                    "select": false,
                                    "key": "d_15176"
                                }]
                            }, {
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u043c\u0435\u043d\u0435\u0434\u0436\u043c\u0435\u043d\u0442\u0430",
                                "folder": true,
                                "select": false,
                                "key": "f_4947",
                                "children": [{
                                    "title": "\u043c\u0435\u043d\u0435\u0434\u0436\u043c\u0435\u043d\u0442\u0430",
                                    "select": false,
                                    "key": "d_15223"
                                }, {
                                    "title": "\u0420\u0435\u043a\u043b\u0430\u043c\u0430 \u0438 \u0441\u0432\u044f\u0437\u0438 \u0441 \u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e",
                                    "select": false,
                                    "key": "d_17015"
                                }]
                            }, {
                                "title": "\u0424\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u043a\u0438",
                                "folder": true,
                                "select": false,
                                "key": "f_5043",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u0444\u0438\u0437\u0438\u043a\u0438 \u0442\u0432\u0435\u0440\u0434\u043e\u0433\u043e \u0442\u0435\u043b\u0430",
                                    "select": false,
                                    "key": "d_15558"
                                }]
                            }]
                        }, {
                            "title": "2018 - \u043a\u043e\u043f\u0438\u044f",
                            "folder": true,
                            "select": false,
                            "key": "y_2168",
                            "children": [{
                                "title": "\u042d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442",
                                "folder": true,
                                "select": false,
                                "key": "f_6744",
                                "children": [{
                                    "title": "\u041a\u0430\u0444\u0435\u0434\u0440\u0430 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0442\u0435\u043e\u0440\u0438\u0438 \u0438 \u043d\u0430\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438",
                                    "select": false,
                                    "key": "d_21607"
                                }]
                            }]
                        }],
                        debugLevel: 0,
                        icon: false,
                        minExpandLevel: 2,
                        activate: function (event, data) {
                            getReport(data.node.key)
                        }
                    });
                });

                function getReport(key) {
                    $.ajax({
                        url: "/report-actions",
                        data: "key=" + key,
                        type: "post",
                        dataType: "json",
                        success: function (response) {
                            if (response.success) {
                                $.each(response.data, function (key, val) {
                                    $("#" + key).html(val);
                                });
                            }
                        }
                    });
                }
            </script>
            <script>
                $(document).ready(function () {
                    $(".fancytree-title").on('click', function () {
                        addBadge($(this).text());
                    })
                })
                var addBadge = function (e) {
                    let text = e;
                    document.querySelector('.out-kod').style.display = "block";
                    var elemOutKod = document.querySelector('.out-kod');
                    elemOutKod.innerHTML += '<div class="badge text-black bg-green-light br-100 fs-12 me-3 mb-2">' + text + '</div>';
                }

                function delBadge() {
                    while (document.querySelector('.badge') != null) {
                        document.querySelector('.badge').remove();
                    }
                    document.querySelector('.out-kod').style.display = "none";
                }
            </script>

@endsection
